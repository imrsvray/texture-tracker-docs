<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"><html>
<head>
  <title>vplibs - header</title>
  <meta name="GENERATOR" content="Quanta Plus">
  <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
</head>
<body>
 <table>
  <tbody>
<tr align="left" valign="top" bgcolor="#ccffff">
<td width="100%">
<table>
  <tbody>
    <tr>
      <td> <a href="/project/vp/vplibs/index.html"><h3> BBC R&amp;D VP
Libraries: </h3></a></td> 
      <td> <a href="/project/vp/vplibs/soGeM/doc/index.html">soGeM</a> |
</td>
      <td> <a 
href="/project/vp/vplibs/VPtexturing/doc/index.html">VPtexturing</a> |
</td>

	<td> <a href="/project/vp/vplibs/VPgeom/doc/index.html">VPgeom</a> |
</td>      
	<td> <a href="/project/vp/vplibs/VPio/doc/index.html">VPio</a> | </td>
	<td> <a href="/project/vp/vplibs/VPip/doc/index.html">VPip</a> | </td>
	<td> <a href="/project/vp/vplibs/VPutil/doc/index.html">VPutil</a> | </td>
        <td> VPai | </td>
      <td> DVSlib | </td>
    </tr>
  </tbody>
</table>
</td>
</tr>
<tr align="left" valign="top" bgcolor="#FFFFFF#ccffff">
<td width="100%">

<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a></div>
<h1>PoseEstPanTiltHead.h</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * File: PoseEstPanTiltHead.h</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * Copyright (c) 2004 The British Broadcasting Corporation.</span>
00005 <span class="comment"> * &lt;b&gt;ALL RIGHTS RESERVED&lt;/b&gt;.</span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> * Copyright in the whole and every part of these source files belongs</span>
00008 <span class="comment"> * to The British Broadcasting Corporation (BBC) and they</span>
00009 <span class="comment"> * may not be used, sold, licenced, transferred, copied or reproduced</span>
00010 <span class="comment"> * in whole or in part in any manner or form or in or on any media to</span>
00011 <span class="comment"> * any person without the prior written consent of the BBC.</span>
00012 <span class="comment"> */</span>
00013 
00014 
00015 <span class="preprocessor">#ifndef PoseEstPanTiltHead_h</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define PoseEstPanTiltHead_h</span>
00017 <span class="preprocessor"></span>
00018 <span class="preprocessor">#include "PoseEstimator.h"</span>
00019 
00020 <span class="keyword">namespace </span>bbcvp {
00021  
00022 
<a name="l00066"></a><a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html">00066</a>   <span class="keyword">class </span><a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html">PoseEstPanTiltHead</a> {
00067  
00068      <span class="keyword">public</span>:
00069 
00093     <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a0">PoseEstPanTiltHead</a>(<span class="keywordtype">int</span> maxLines=100, <span class="keywordtype">int</span> maxCameras=1, <span class="keywordtype">int</span> maxObjects=1, 
00094                        <span class="keywordtype">int</span> xlen=720, <span class="keywordtype">int</span> ylen=576, <span class="keywordtype">double</span> aspect = 16.0 / 9.0 * 720.0 / 702.0);
00095  
00099     <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a1">~PoseEstPanTiltHead</a>();
00100 
<a name="l00107"></a><a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a2">00107</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a2">setVerbosity</a>(<span class="keywordtype">int</span> verbosity) { mVerbose = verbosity; mMyPoseEst-&gt;<a class="code" href="classbbcvp_1_1PoseEstimator.html#a12">setVerbosity</a>(mVerbose); }
00108     
00109 
00120      <span class="keywordtype">bool</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a3">addLine</a>(<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> z0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> z1);
00121     
00139      <span class="keywordtype">bool</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a4">addLineObservation</a>(<span class="keywordtype">int</span> lineIndex, <span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> weight=1.0, <span class="keywordtype">int</span> cam=-1);
00140 
00146      <span class="keywordtype">int</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a5">getNLines</a>(); 
00147     
00153      <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a6">clearAllImages</a>();
00154 
00160      <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a7">clearLastImage</a>();
00161 
00178     <span class="keywordtype">bool</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a8">addNewImage</a>(<span class="keywordtype">int</span> fieldType);
00179 
00190     <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a9">adjustCamPos</a>(<span class="keywordtype">bool</span> adjust);
00191 
00208         <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a10">rollPitchNotCamera</a>(<span class="keywordtype">bool</span> rollPitch);
00209 
00221     <span class="keywordtype">double</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a11">calcFullSolution</a>();
00222 
00234     <span class="keywordtype">double</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a12">calcLastSolution</a>();
00235 
00248     <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a13">setCamPos</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> z);
00249     
00265     <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a14">getCamPos</a>(<span class="keywordtype">double</span> *x, <span class="keywordtype">double</span> *y, <span class="keywordtype">double</span> *z);
00266 
00277     <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a15">getPitchRot</a>(<span class="keywordtype">double</span> *x, <span class="keywordtype">double</span> *y, <span class="keywordtype">double</span> *z);
00278 
00289     <span class="keywordtype">void</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a16">setPitchRot</a>(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> z);
00290 
00311     <span class="keywordtype">bool</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a17">setCamRotPTR</a>(<span class="keywordtype">double</span> pan, <span class="keywordtype">double</span> tilt, <span class="keywordtype">double</span> roll, <span class="keywordtype">int</span> cam=-1);
00312 
00333     <span class="keywordtype">bool</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a18">getCamRotPTR</a>(<span class="keywordtype">double</span> *pan, <span class="keywordtype">double</span> *tilt, <span class="keywordtype">double</span> *roll, <span class="keywordtype">int</span> cam=-1);
00334 
00345     <span class="keywordtype">bool</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a19">getCamFOV</a>(<span class="keywordtype">double</span> *fovy, <span class="keywordtype">int</span> cam=-1);
00346 
00347 
00358     <span class="keywordtype">bool</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a20">setCamFOV</a>(<span class="keywordtype">double</span> fovy, <span class="keywordtype">int</span> cam=-1);
00359 
00389     <span class="keywordtype">bool</span> <a class="code" href="classbbcvp_1_1PoseEstPanTiltHead.html#a21">projectIntoImage</a>(<span class="keywordtype">int</span> lineIndex, <span class="keywordtype">double</span> *x0, <span class="keywordtype">double</span> *y0, <span class="keywordtype">double</span> *x1, <span class="keywordtype">double</span> *y1, 
00390                           <span class="keywordtype">double</span> lineWid=0, <span class="keywordtype">double</span> *projectedWidth = (<span class="keywordtype">double</span>*)0, <span class="keywordtype">int</span> cam=-1);
00391 
00392   <span class="keyword">private</span>:
00393     <span class="keywordtype">double</span> *****mworld_lines;
00394     <span class="keywordtype">double</span> ******mimage_lines;
00395     <span class="keywordtype">int</span> **mnpoints;
00396     <span class="keywordtype">int</span> **mnlines;
00397     <span class="keywordtype">bool</span> **muse_im_obj;
00398         <span class="keywordtype">double</span> ****mweight_lines;
00399     
00400     <span class="comment">// camera internal and external parameters, and which internal ones are to be adjusted</span>
00401     <span class="keywordtype">double</span> **mintrin_par;
00402     <span class="keywordtype">double</span> **mrotation;
00403     <span class="keywordtype">double</span> **mposition;
00404     <span class="keywordtype">bool</span> **madjust_int;
00405     <span class="keywordtype">bool</span> **madj_rotation_cam;
00406     <span class="keywordtype">bool</span> **madj_position_cam;
00407     
00408     <span class="comment">// object external parameters</span>
00409     <span class="keywordtype">double</span> ***mposition_obj;
00410     <span class="keywordtype">double</span> ***mrotation_obj;
00411     <span class="keywordtype">bool</span> ***madj_position_obj;
00412     <span class="keywordtype">bool</span> ***madj_rotation_obj;
00413     
00414     <span class="keywordtype">int</span> mMaxImages;  <span class="comment">// one time instant even if we use muliple camera views - we treat these as multiple cameras</span>
00415     <span class="keywordtype">int</span> mMaxPoints;   <span class="comment">// no points - everything is lines now</span>
00416     <span class="keywordtype">int</span> mMaxLines;  <span class="comment">// max number of lines on the pitch</span>
00417     <span class="keywordtype">int</span> mMaxCamera;  <span class="comment">// max no. of cameras (i.e. images in our case) we'll consider in one go</span>
00418     <span class="keywordtype">int</span> mMaxObj;      <span class="comment">// only one object - the main pitch - but could later split it into two or more if some dims unknown</span>
00419     
00420     PoseEstimator *mMyPoseEst;
00421     
00422     <span class="keywordtype">int</span> mNCameras;         <span class="comment">// number of cameras (i.e. frames in this app) we're using at present</span>
00423     <span class="keywordtype">int</span> mNObj;             <span class="comment">// number of objects - usually 1 unless pitch is being split up</span>
00424     <span class="keywordtype">int</span> mNImages;          <span class="comment">// number of images (= unique time instants with different obj positions) - always 1</span>
00425     <span class="keywordtype">int</span> mVerbose;
00426     <span class="keywordtype">int</span> mMostRecent;       <span class="comment">// when creating next camera, initialise using data from this one</span>
00427 
00428     <span class="keywordtype">int</span> mXLen;             <span class="comment">// parameters common to all cameras</span>
00429     <span class="keywordtype">int</span> mYLen;
00430     <span class="keywordtype">double</span> mAspect;
00431 
00432         <span class="keywordtype">bool</span> mRollPitch;       <span class="comment">// true if pitch can roll and camera roll (zrot) is fixed</span>
00433 
00434   };  <span class="comment">// end of class def</span>
00435   
00436 }  <span class="comment">// end of namespace</span>
00437 
00438 <span class="preprocessor">#endif</span>
</pre></div></td>
</tr>
  </tbody>
</table>
</body>
</html>
